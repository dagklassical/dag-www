---
/**
 * Componente Card modular para DAG Classical
 * Basado en Alkaline Card.astro adaptado para música clásica
 * 
 * Props:
 * - title: string - Título de la tarjeta
 * - description: string - Descripción principal
 * - iconName?: string - Nombre del icono (music, artist, blockchain, etc.)
 * - variant?: "primary" | "secondary" | "accent" - Variante de color
 * - size?: "sm" | "md" | "lg" - Tamaño de la tarjeta
 * - shadow?: "none" | "sm" | "md" | "lg" - Sombra
 * - href?: string - URL para hacer clickeable
 * - image?: string - Imagen opcional
 * - class?: string - Clases adicionales
 * 
 * Ejemplo de uso:
 * <Card
 *   title="Distribución Global"
 *   description="Llegamos a todas las plataformas digitales con tecnología de vanguardia"
 *   iconName="music"
 *   variant="primary"
 *   size="md"
 *   shadow="md"
 * />
 */

interface Props {
  title: string;
  description: string;
  iconName?: string;
  variant?: "primary" | "secondary" | "accent" | "neutral";
  size?: "sm" | "md" | "lg";
  shadow?: "none" | "sm" | "md" | "lg";
  href?: string;
  image?: string;
  class?: string;
}

const {
  title,
  description,
  iconName = null,
  variant = "primary",
  size = "md",
  shadow = "sm",
  href,
  image,
  class: className = ""
} = Astro.props;

// Configuración de colores DAG Classical
const variants = {
  primary: {
    bg: "bg-gradient-to-br from-violet-900 to-violet-800",
    border: "border-violet-600",
    text: "text-white",
    accent: "text-yellow-400"
  },
  secondary: {
    bg: "bg-gradient-to-br from-slate-800 to-slate-700", 
    border: "border-slate-600",
    text: "text-white",
    accent: "text-violet-400"
  },
  accent: {
    bg: "bg-gradient-to-br from-amber-500 to-amber-600",
    border: "border-amber-400", 
    text: "text-white",
    accent: "text-violet-900"
  },
  neutral: {
    bg: "bg-white dark:bg-slate-800",
    border: "border-slate-200 dark:border-slate-700",
    text: "text-slate-900 dark:text-white",
    accent: "text-violet-600 dark:text-violet-400"
  }
};

// Configuración de tamaños
const sizes = {
  sm: "p-4 max-w-sm",
  md: "p-6 max-w-md", 
  lg: "p-8 max-w-lg"
};

// Configuración de sombras
const shadows = {
  none: "shadow-none",
  sm: "shadow-sm",
  md: "shadow-lg", 
  lg: "shadow-xl"
};

// Iconos específicos para música clásica
const getIconPath = (iconName: string) => {
  const icons = {
    music: "M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3",
    artist: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",
    blockchain: "M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z",
    certificate: "M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z",
    distribution: "M13 10V3L4 14h7v7l9-11h-7z",
    quality: "M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z",
    global: "M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"
  };
  return icons[iconName as keyof typeof icons] || icons.music;
};

const currentVariant = variants[variant];
const currentSize = sizes[size];
const currentShadow = shadows[shadow];

const cardContent = (
  <div
    class={`
      ${currentVariant.bg} 
      ${currentVariant.border} 
      ${currentVariant.text}
      ${currentSize} 
      ${currentShadow}
      border-2 rounded-xl 
      transition-all duration-300 
      hover:scale-105 
      hover:shadow-2xl
      group
      ${className}
    `}
  >
    {/* Header con icono y título */}
    <div class="flex items-start justify-between mb-4">
      <div class="flex-1">
        <h3 class={`text-xl font-bold mb-2 ${currentVariant.text} group-hover:${currentVariant.accent} transition-colors`}>
          {title}
        </h3>
        <div class={`w-12 h-1 ${currentVariant.accent.replace('text-', 'bg-')} rounded-full mb-4`}></div>
      </div>
      
      {iconName && (
        <div class={`${currentVariant.accent} ml-4 flex-shrink-0`}>
          <svg 
            class="w-8 h-8" 
            fill="none" 
            stroke="currentColor" 
            viewBox="0 0 24 24"
          >
            <path 
              stroke-linecap="round" 
              stroke-linejoin="round" 
              stroke-width="2" 
              d={getIconPath(iconName)}
            />
          </svg>
        </div>
      )}
    </div>

    {/* Imagen opcional */}
    {image && (
      <div class="mb-4 rounded-lg overflow-hidden">
        <img 
          src={image} 
          alt={title}
          class="w-full h-32 object-cover"
          loading="lazy"
        />
      </div>
    )}

    {/* Descripción */}
    <p class={`text-sm leading-relaxed ${variant === 'neutral' ? 'text-slate-600 dark:text-slate-300' : 'text-slate-100'}`}>
      {description}
    </p>

    {/* Efecto hover overlay */}
    <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"></div>
  </div>
);
---

{href ? (
  <a 
    href={href}
    class="block no-underline hover:no-underline transform hover:scale-105 transition-transform duration-200"
  >
    {cardContent}
  </a>
) : (
  <div class="relative">
    {cardContent}
  </div>
)}

<style>
  /* Animaciones personalizadas */
  .group:hover {
    transform: translateY(-2px);
  }
  
  .group:hover .absolute {
    opacity: 1;
  }
</style>